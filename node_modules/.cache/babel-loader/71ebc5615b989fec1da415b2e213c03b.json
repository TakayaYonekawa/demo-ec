{"ast":null,"code":"import _objectSpread from\"/Users/yonekawatakashinari/Desktop/\\u8EE2\\u8077\\u30DB\\u309A\\u30FC\\u30C8\\u30D5\\u30A9\\u30EA\\u30AA/ec-site/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/yonekawatakashinari/Desktop/\\u8EE2\\u8077\\u30DB\\u309A\\u30FC\\u30C8\\u30D5\\u30A9\\u30EA\\u30AA/ec-site/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/yonekawatakashinari/Desktop/\\u8EE2\\u8077\\u30DB\\u309A\\u30FC\\u30C8\\u30D5\\u30A9\\u30EA\\u30AA/ec-site/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useDispatch}from\"react-redux\";import{useSearchParams}from\"react-router-dom\";import Item from\"./Item\";import{Sidebar}from\"./Sidebar\";import{getItems}from\"../redux/item/itemSlice\";import{useSelector}from\"../store\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ItemsLists=function ItemsLists(){var dispatch=useDispatch();var _useSelector=useSelector(function(store){return store.items;}),items=_useSelector.items,maxPriceRange=_useSelector.maxPriceRange,minPriceRange=_useSelector.minPriceRange;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),filterItem=_useState2[0],setFilterItem=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),filterFlag=_useState4[0],setFilterFlag=_useState4[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var categoryParams=searchParams.get(\"category\");// API反映\nuseEffect(function(){dispatch(getItems());},[]);// 絞り込み\nuseEffect(function(){var copyPosts=_toConsumableArray(items);// 料金絞り込み\nif(!minPriceRange&&maxPriceRange===100000){setFilterFlag(false);}else if(minPriceRange||maxPriceRange){copyPosts=copyPosts.filter(function(post){return post.price<maxPriceRange/100&&post.price>minPriceRange/100;});setFilterItem(copyPosts);setFilterFlag(true);}// カテゴリー絞り込み\nif(categoryParams===\"all\"){setFilterItem(copyPosts);return;}else if(categoryParams){copyPosts=copyPosts.filter(function(post){return post.category.match(categoryParams);});setFilterFlag(true);}setFilterItem(copyPosts);},[categoryParams,maxPriceRange,minPriceRange]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container item-lists-wrap flex\",children:[/*#__PURE__*/_jsx(Sidebar,{}),items?/*#__PURE__*/_jsx(\"div\",{className:\"item-lists flex\",children:filterFlag?filterItem.map(function(item){return/*#__PURE__*/_jsx(Item,_objectSpread({},item),item.id);}):items.map(function(item){return/*#__PURE__*/_jsx(Item,_objectSpread({},item),item.id);})}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})]});};","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSearchParams","Item","Sidebar","getItems","useSelector","ItemsLists","dispatch","store","items","maxPriceRange","minPriceRange","filterItem","setFilterItem","filterFlag","setFilterFlag","searchParams","categoryParams","get","copyPosts","filter","post","price","category","match","map","item","id"],"sources":["/Users/yonekawatakashinari/Desktop/転職ポートフォリオ/ec-site/src/components/ItemsLists.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useSearchParams } from \"react-router-dom\";\nimport Item from \"./Item\";\nimport { Sidebar } from \"./Sidebar\";\nimport { getItems } from \"../redux/item/itemSlice\";\nimport { AppDispatch, useSelector } from \"../store\";\n\nexport const ItemsLists = () => {\n  type apiArray = {\n    id: number;\n    title: string;\n    price: number;\n    category: string;\n    image: string;\n  };\n\n  const dispatch = useDispatch<AppDispatch>();\n  const {items, maxPriceRange, minPriceRange} = useSelector((store) => store.items)\n  const [filterItem, setFilterItem] = useState<apiArray[]>([]);\n  const [filterFlag, setFilterFlag] = useState<boolean>(false);\n  const [searchParams] = useSearchParams();\n  const categoryParams = searchParams.get(\"category\");\n\n\n\n  // API反映\n  useEffect(() => {\n    dispatch(getItems());\n  }, []);\n\n\n  // 絞り込み\n  useEffect(() => {\n    let copyPosts = [...items];\n\n    // 料金絞り込み\n    if(!minPriceRange && maxPriceRange === 100000){\n      setFilterFlag(false);\n    } else if(minPriceRange || maxPriceRange){\n      copyPosts = copyPosts.filter((post: apiArray) => {\n       return (post.price < maxPriceRange/100 && post.price > minPriceRange/100)\n      })\n      setFilterItem(copyPosts);\n      setFilterFlag(true);\n\n    }\n\n    // カテゴリー絞り込み\n    if (categoryParams === \"all\") {\n      setFilterItem(copyPosts);\n      return;\n    } else if (categoryParams) {\n      copyPosts = copyPosts.filter((post: apiArray) =>\n        post.category.match(categoryParams)\n      );\n      setFilterFlag(true);\n    }\n    setFilterItem(copyPosts);\n  }, [categoryParams ,maxPriceRange, minPriceRange]);\n\n  return (\n    <div className=\"container item-lists-wrap flex\">\n      <Sidebar />\n      {items ? (\n        <div className=\"item-lists flex\">\n          {filterFlag\n            ? filterItem.map((item: apiArray) => {\n                return <Item key={item.id} {...item} />;\n              })\n            : items.map((item: apiArray) => {\n                return <Item key={item.id} {...item} />;\n              })}\n        </div>\n      ) : (\n\n        <div>Loading...</div>\n      )}\n    </div>\n  );\n};\n"],"mappings":"8jBAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,eAAT,KAAgC,kBAAhC,CACA,MAAOC,KAAP,KAAiB,QAAjB,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,OAASC,QAAT,KAAyB,yBAAzB,CACA,OAAsBC,WAAtB,KAAyC,UAAzC,C,wFAEA,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CAS9B,GAAMC,SAAQ,CAAGP,WAAW,EAA5B,CACA,iBAA8CK,WAAW,CAAC,SAACG,KAAD,QAAWA,MAAK,CAACC,KAAjB,EAAD,CAAzD,CAAOA,KAAP,cAAOA,KAAP,CAAcC,aAAd,cAAcA,aAAd,CAA6BC,aAA7B,cAA6BA,aAA7B,CACA,cAAoCZ,QAAQ,CAAa,EAAb,CAA5C,wCAAOa,UAAP,eAAmBC,aAAnB,eACA,eAAoCd,QAAQ,CAAU,KAAV,CAA5C,yCAAOe,UAAP,eAAmBC,aAAnB,eACA,qBAAuBd,eAAe,EAAtC,sDAAOe,YAAP,sBACA,GAAMC,eAAc,CAAGD,YAAY,CAACE,GAAb,CAAiB,UAAjB,CAAvB,CAIA;AACApB,SAAS,CAAC,UAAM,CACdS,QAAQ,CAACH,QAAQ,EAAT,CAAR,CACD,CAFQ,CAEN,EAFM,CAAT,CAKA;AACAN,SAAS,CAAC,UAAM,CACd,GAAIqB,UAAS,oBAAOV,KAAP,CAAb,CAEA;AACA,GAAG,CAACE,aAAD,EAAkBD,aAAa,GAAK,MAAvC,CAA8C,CAC5CK,aAAa,CAAC,KAAD,CAAb,CACD,CAFD,IAEO,IAAGJ,aAAa,EAAID,aAApB,CAAkC,CACvCS,SAAS,CAAGA,SAAS,CAACC,MAAV,CAAiB,SAACC,IAAD,CAAoB,CAChD,MAAQA,KAAI,CAACC,KAAL,CAAaZ,aAAa,CAAC,GAA3B,EAAkCW,IAAI,CAACC,KAAL,CAAaX,aAAa,CAAC,GAArE,CACA,CAFW,CAAZ,CAGAE,aAAa,CAACM,SAAD,CAAb,CACAJ,aAAa,CAAC,IAAD,CAAb,CAED,CAED;AACA,GAAIE,cAAc,GAAK,KAAvB,CAA8B,CAC5BJ,aAAa,CAACM,SAAD,CAAb,CACA,OACD,CAHD,IAGO,IAAIF,cAAJ,CAAoB,CACzBE,SAAS,CAAGA,SAAS,CAACC,MAAV,CAAiB,SAACC,IAAD,QAC3BA,KAAI,CAACE,QAAL,CAAcC,KAAd,CAAoBP,cAApB,CAD2B,EAAjB,CAAZ,CAGAF,aAAa,CAAC,IAAD,CAAb,CACD,CACDF,aAAa,CAACM,SAAD,CAAb,CACD,CA1BQ,CA0BN,CAACF,cAAD,CAAiBP,aAAjB,CAAgCC,aAAhC,CA1BM,CAAT,CA4BA,mBACE,aAAK,SAAS,CAAC,gCAAf,wBACE,KAAC,OAAD,IADF,CAEGF,KAAK,cACJ,YAAK,SAAS,CAAC,iBAAf,UACGK,UAAU,CACPF,UAAU,CAACa,GAAX,CAAe,SAACC,IAAD,CAAoB,CACjC,mBAAO,KAAC,IAAD,kBAAwBA,IAAxB,EAAWA,IAAI,CAACC,EAAhB,CAAP,CACD,CAFD,CADO,CAIPlB,KAAK,CAACgB,GAAN,CAAU,SAACC,IAAD,CAAoB,CAC5B,mBAAO,KAAC,IAAD,kBAAwBA,IAAxB,EAAWA,IAAI,CAACC,EAAhB,CAAP,CACD,CAFD,CALN,EADI,cAYJ,mCAdJ,GADF,CAmBD,CAxEM"},"metadata":{},"sourceType":"module"}