{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nexport const getItems = createAsyncThunk('items/getItems', async () => {\n  return await fetch('https://fakestoreapi.com/products').then(res => res.json());\n});\nexport const getDetail = createAsyncThunk('items/getDetail', async id => {\n  return await fetch(`https://fakestoreapi.com/products/${id}`).then(res => res.json());\n});\nconst initialState = {\n  items: [],\n  detail: [],\n  maxPrice: 100000,\n  minPrice: 0,\n  maxPriceRange: 100000,\n  minPriceRange: 0,\n  filterFlag: false\n};\nconst itemSlice = createSlice({\n  name: \"items\",\n  initialState,\n  reducers: {\n    // 最大価格の取得\n    handleMaxPrice: (state, action) => {\n      let maxPriceValue = Number(action.payload);\n\n      if (state.minPrice + 1000 > maxPriceValue) {\n        return;\n      }\n\n      state.maxPrice = maxPriceValue;\n    },\n    // 最低価格の取得\n    handleMinPrice: (state, action) => {\n      let minPriceValue = Number(action.payload);\n\n      if (state.maxPrice - 1000 < minPriceValue) {\n        return;\n      }\n\n      state.minPrice = minPriceValue;\n    },\n    // 絞り込みを実行\n    clickPrice: state => {\n      state.maxPriceRange = state.maxPrice;\n      state.minPriceRange = state.minPrice;\n      let copyPosts = [...items]; // 料金絞り込み\n\n      if (!minPriceRange && maxPriceRange === 100000) {\n        setFilterFlag(false);\n      } else if (minPriceRange || maxPriceRange) {\n        copyPosts = copyPosts.filter(post => {\n          return post.price < maxPriceRange / 100 && post.price > minPriceRange / 100;\n        });\n        setFilterItem(copyPosts);\n        setFilterFlag(true);\n      }\n    } // handleChecked: (state, action) => {\n    // },\n\n  },\n  extraReducers: {\n    [getItems.fulfilled]: (state, action) => {\n      state.items = action.payload;\n    },\n    [getDetail.fulfilled]: (state, action) => {\n      state.detail = action.payload;\n    }\n  }\n});\nexport const {\n  handleMaxPrice,\n  handleMinPrice,\n  clickPrice\n} = itemSlice.actions;\nexport default itemSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","getItems","fetch","then","res","json","getDetail","id","initialState","items","detail","maxPrice","minPrice","maxPriceRange","minPriceRange","filterFlag","itemSlice","name","reducers","handleMaxPrice","state","action","maxPriceValue","Number","payload","handleMinPrice","minPriceValue","clickPrice","copyPosts","setFilterFlag","filter","post","price","setFilterItem","extraReducers","fulfilled","actions","reducer"],"sources":["/Users/yonekawatakashinari/Desktop/js-practice/yone-ec-siteのコピー/src/redux/item/itemSlice.tsx"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\nexport const getItems:any = createAsyncThunk('items/getItems', async () => {\n    return await fetch('https://fakestoreapi.com/products').then((res) =>\n      res.json()\n    );\n  });\n\n  export const getDetail:any = createAsyncThunk('items/getDetail', async (id: string | undefined) => {\n    return await fetch(`https://fakestoreapi.com/products/${id}`).then((res) =>\n      res.json()\n    );\n  });\n\nconst initialState = {\n  items: [],\n  detail: [],\n  maxPrice:100000,\n  minPrice:0,\n  maxPriceRange:100000,\n  minPriceRange: 0,\n  filterFlag: false,\n};\n\nconst itemSlice = createSlice({\n  name: \"items\",\n  initialState,\n  reducers:{\n    // 最大価格の取得\n    handleMaxPrice: (state, action) => {\n      let maxPriceValue = Number(action.payload);\n      if(state.minPrice + 1000 > maxPriceValue){\n        return\n      }\n      state.maxPrice = maxPriceValue;\n    },\n    // 最低価格の取得\n    handleMinPrice: (state, action) => {\n      let minPriceValue = Number(action.payload);\n      if(state.maxPrice - 1000 < minPriceValue){\n        return\n      }\n      state.minPrice = minPriceValue;\n    },\n    // 絞り込みを実行\n    clickPrice: (state) => {\n      state.maxPriceRange = state.maxPrice;\n      state.minPriceRange = state.minPrice;\n\n      let copyPosts = [...items];\n\n      // 料金絞り込み\n      if(!minPriceRange && maxPriceRange === 100000){\n        setFilterFlag(false);\n      } else if(minPriceRange || maxPriceRange){\n        copyPosts = copyPosts.filter((post: apiArray) => {\n         return (post.price < maxPriceRange/100 && post.price > minPriceRange/100)\n        })\n        setFilterItem(copyPosts);\n        setFilterFlag(true);\n  \n      }\n  \n    },\n    // handleChecked: (state, action) => {\n    // },\n  },\n  extraReducers: {\n    [getItems.fulfilled]: (state:any, action:any) => {\n      state.items = action.payload;\n    },\n    [getDetail.fulfilled]: (state:any, action:any) => {\n        state.detail = action.payload;\n    },\n  },\n});\n\n\nexport const {handleMaxPrice, handleMinPrice, clickPrice} = itemSlice.actions;\nexport default itemSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}